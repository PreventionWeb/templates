(function(){var a;a=this.jQuery;a.fn.extend({confirmWithReveal:function(c){var i,h,e,g,d,f,b;if(c==null){c={}}h={modal_class:"medium",title:"Are you sure?",title_class:"",body:"This action cannot be undone.",body_class:"",password:false,prompt:"Type <strong>%s</strong> to continue:",footer_class:"",ok:"Confirm",ok_class:"button alert",cancel:"Cancel",cancel_class:"button secondary"};d=a.extend({},h,c);e=function(l){var n,p,k,q,o,m,j;q=l.data("confirm");if(q==null){q={}}if((typeof q==="string")&&(q.length>0)){return g.call(window,q)}m=function(r){return q[r]||d[r]};o=a("<div data-reveal class='reveal-modal "+(m("modal_class"))+"'>\n  <h2 data-confirm-title class='"+(m("title_class"))+"'></h2>\n  <p data-confirm-body class='"+(m("body_class"))+"'></p>\n  <div data-confirm-footer class='"+(m("footer_class"))+"'>\n    <a data-confirm-cancel class='"+(m("cancel_class"))+"'></a>\n  </div>\n</div>");n=l.is("a")?l.clone():a("<a/>");n.removeAttr("data-confirm").attr("class",m("ok_class")).html(m("ok")).on("click",function(r){if(a(this).prop("disabled")){return false}l.trigger("confirm.reveal",r);if(l.is("form, :input")){return l.closest("form").removeAttr("data-confirm").submit()}});o.find("[data-confirm-title]").html(m("title"));o.find("[data-confirm-body]").html(m("body"));o.find("[data-confirm-cancel]").html(m("cancel")).on("click",function(r){o.foundation("reveal","close");return l.trigger("cancel.reveal",r)});o.find("[data-confirm-footer]").append(n);if((j=m("password"))){k=(m("prompt")).replace("%s",j);p="<label>\n  "+k+"\n  <input data-confirm-password type='text'/>\n</label>";o.find("[data-confirm-body]").after(a(p));o.find("[data-confirm-password]").on("keyup",function(s){var r;r=a(this).val()!==j;return n.toggleClass("disabled",r).prop("disabled",r)}).trigger("keyup")}o.appendTo(a("body")).foundation().foundation("reveal","open").on("closed.fndtn.reveal",function(r){return o.remove()});return false};i=function(j){if(!(e(a(this)))){j.preventDefault();return j.stopImmediatePropagation()}};g=((f=a.rails)!=null?f.confirm:void 0)?a.rails.confirm:window.confirm;if((b=a.rails)!=null?b.allowAction:void 0){a.rails.allowAction=function(j){return e(a(j))}}return this.each(function(){var j;j=a(this);j.on("click","a[data-confirm], :input[data-confirm]",i);j.on("submit","form[data-confirm]",i);return j})}})}).call(this);